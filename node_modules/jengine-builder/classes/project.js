var Generator = require('generator'),
    path = require('path')
;

var Project = module.exports = function() {
  this.loadScene(JEngineBuilder.BlankScene());
};

_.extend(Project, {
  create: function(options) {
    options || (options = {});
    Generator(path.join(JEngineBuilder.rootPath, 'generators', 'project'), options.path, {name: options.name});
    return Project.load(options.path);
  },

  load: function(projPath) {
    var proj = new Project;
    proj.root = projPath;
    proj.loadPackage();
    return proj;
  }
});

_.extend(Project.prototype, {
  loadPackage: function() {
    this.package = require(path.join(this.root, 'package.json'));
    this.name = this.package.name;
    return this;
  },

  loadScene: function(scene, options) {
    this.currentScene = JEngine.Scene.Load(scene, options);
    return this;
  }
});