var __ = require('underscore');

module.exports = {
  deepExtend: function() {
    var destination = {};
    __.each(Array.prototype.slice.call(arguments), function(source) {
      for (var property in source) {
        if (typeof source[property] === "object" &&
         source[property] !== null ) {
          destination[property] = destination[property] || {};
          arguments.callee(destination[property], source[property]);
        } else {
          destination[property] = source[property];
        }
      }
    });
    return destination;
  }
};